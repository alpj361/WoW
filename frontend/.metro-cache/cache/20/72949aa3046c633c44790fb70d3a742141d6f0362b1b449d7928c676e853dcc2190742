{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../services/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":134},"end":{"line":3,"column":70,"index":204}}],"key":"KPiafkkHXMyy0AQm6tuLQc7uw64=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/Users/pj/Desktop/Wow/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _servicesSupabase = require(_dependencyMap[1], \"../services/supabase\");\n  var _reactJsxDevRuntime = require(_dependencyMap[2], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [session, setSession] = (0, _react.useState)(null);\n    const [user, setUser] = (0, _react.useState)(null);\n    const [profile, setProfile] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      if (!(0, _servicesSupabase.isSupabaseConfigured)()) {\n        console.log('âš ï¸ Supabase not configured');\n        setLoading(false);\n        return;\n      }\n\n      // Get initial session\n      initializeAuth();\n\n      // Listen for auth changes\n      const {\n        data: {\n          subscription\n        }\n      } = _servicesSupabase.supabase.auth.onAuthStateChange(async (event, session) => {\n        console.log('ðŸ” Auth state change:', event, session?.user?.email);\n        if (event === 'SIGNED_IN' && session?.user) {\n          setSession(session);\n          // Check profile\n          const profileData = await fetchProfile(session.user.id);\n          if (profileData) {\n            setUser(session.user);\n            setProfile(profileData);\n          } else {\n            // No profile = not fully registered\n            console.log('âŒ No profile, user not set');\n            setUser(null);\n            setProfile(null);\n          }\n          setLoading(false);\n        } else if (event === 'SIGNED_OUT') {\n          setSession(null);\n          setUser(null);\n          setProfile(null);\n          setLoading(false);\n        }\n      });\n      return () => subscription.unsubscribe();\n    }, []);\n    const initializeAuth = async () => {\n      try {\n        const {\n          data: {\n            session\n          }\n        } = await _servicesSupabase.supabase.auth.getSession();\n        console.log('ðŸ” Initial session:', session?.user?.email);\n        if (session?.user) {\n          setSession(session);\n          const profileData = await fetchProfile(session.user.id);\n          if (profileData) {\n            setUser(session.user);\n            setProfile(profileData);\n          } else {\n            console.log('âŒ No profile on init');\n            setUser(null);\n          }\n        }\n      } catch (error) {\n        console.error('Init auth error:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    // Fetch profile, returns profile data or null\n    const fetchProfile = async userId => {\n      try {\n        console.log('ðŸ” Fetching profile for:', userId);\n        const {\n          data,\n          error\n        } = await _servicesSupabase.supabase.from('profiles').select('*').eq('id', userId).single();\n        if (data && !error) {\n          console.log('âœ… Profile found:', data.email);\n          return data;\n        } else {\n          console.log('âŒ No profile found');\n          return null;\n        }\n      } catch (error) {\n        console.error('Fetch profile error:', error);\n        return null;\n      }\n    };\n    const refreshProfile = async () => {\n      if (session?.user) {\n        const profileData = await fetchProfile(session.user.id);\n        if (profileData) {\n          setProfile(profileData);\n          setUser(session.user);\n        }\n      }\n    };\n    const signOut = async () => {\n      try {\n        setSession(null);\n        setUser(null);\n        setProfile(null);\n        await _servicesSupabase.supabase.auth.signOut();\n      } catch (error) {\n        console.error('Sign out error:', error);\n      }\n    };\n    const value = {\n      session,\n      user,\n      profile,\n      loading,\n      signOut,\n      refreshProfile\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: value,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 12\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":150,"map":[[8,2,16,0,"exports"],[8,9,16,0],[8,10,16,0,"AuthProvider"],[8,22,16,0],[8,25,16,0,"AuthProvider"],[8,37,16,0],[9,2,142,0,"exports"],[9,9,142,0],[9,10,142,0,"useAuth"],[9,17,142,0],[9,20,142,0,"useAuth"],[9,27,142,0],[10,2,1,0],[10,6,1,0,"_react"],[10,12,1,0],[10,15,1,0,"require"],[10,22,1,0],[10,23,1,0,"_dependencyMap"],[10,37,1,0],[11,2,3,0],[11,6,3,0,"_servicesSupabase"],[11,23,3,0],[11,26,3,0,"require"],[11,33,3,0],[11,34,3,0,"_dependencyMap"],[11,48,3,0],[12,2,3,70],[12,6,3,70,"_reactJsxDevRuntime"],[12,25,3,70],[12,28,3,70,"require"],[12,35,3,70],[12,36,3,70,"_dependencyMap"],[12,50,3,70],[13,2,14,0],[13,8,14,6,"AuthContext"],[13,19,14,17],[13,35,14,20],[13,39,14,20,"createContext"],[13,45,14,33],[13,46,14,33,"createContext"],[13,59,14,33],[13,61,14,63,"undefined"],[13,70,14,72],[13,71,14,73],[14,2,16,7],[14,11,16,16,"AuthProvider"],[14,23,16,28,"AuthProvider"],[14,24,16,29],[15,4,16,31,"children"],[16,2,16,71],[16,3,16,72],[16,5,16,74],[17,4,17,4],[17,10,17,10],[17,11,17,11,"session"],[17,18,17,18],[17,20,17,20,"setSession"],[17,30,17,30],[17,31,17,31],[17,34,17,34],[17,38,17,34,"useState"],[17,44,17,42],[17,45,17,42,"useState"],[17,53,17,42],[17,55,17,59],[17,59,17,63],[17,60,17,64],[18,4,18,4],[18,10,18,10],[18,11,18,11,"user"],[18,15,18,15],[18,17,18,17,"setUser"],[18,24,18,24],[18,25,18,25],[18,28,18,28],[18,32,18,28,"useState"],[18,38,18,36],[18,39,18,36,"useState"],[18,47,18,36],[18,49,18,50],[18,53,18,54],[18,54,18,55],[19,4,19,4],[19,10,19,10],[19,11,19,11,"profile"],[19,18,19,18],[19,20,19,20,"setProfile"],[19,30,19,30],[19,31,19,31],[19,34,19,34],[19,38,19,34,"useState"],[19,44,19,42],[19,45,19,42,"useState"],[19,53,19,42],[19,55,19,55],[19,59,19,59],[19,60,19,60],[20,4,20,4],[20,10,20,10],[20,11,20,11,"loading"],[20,18,20,18],[20,20,20,20,"setLoading"],[20,30,20,30],[20,31,20,31],[20,34,20,34],[20,38,20,34,"useState"],[20,44,20,42],[20,45,20,42,"useState"],[20,53,20,42],[20,55,20,43],[20,59,20,47],[20,60,20,48],[21,4,22,4],[21,8,22,4,"useEffect"],[21,14,22,13],[21,15,22,13,"useEffect"],[21,24,22,13],[21,26,22,14],[21,32,22,20],[22,6,23,8],[22,10,23,12],[22,11,23,13],[22,15,23,13,"isSupabaseConfigured"],[22,32,23,33],[22,33,23,33,"isSupabaseConfigured"],[22,53,23,33],[22,55,23,34],[22,56,23,35],[22,58,23,37],[23,8,24,12,"console"],[23,15,24,19],[23,16,24,20,"log"],[23,19,24,23],[23,20,24,24],[23,48,24,52],[23,49,24,53],[24,8,25,12,"setLoading"],[24,18,25,22],[24,19,25,23],[24,24,25,28],[24,25,25,29],[25,8,26,12],[26,6,27,8],[28,6,29,8],[29,6,30,8,"initializeAuth"],[29,20,30,22],[29,21,30,23],[29,22,30,24],[31,6,32,8],[32,6,33,8],[32,12,33,14],[33,8,33,16,"data"],[33,12,33,20],[33,14,33,22],[34,10,33,24,"subscription"],[35,8,33,37],[36,6,33,39],[36,7,33,40],[36,10,33,43,"supabase"],[36,27,33,51],[36,28,33,51,"supabase"],[36,36,33,51],[36,37,33,52,"auth"],[36,41,33,56],[36,42,33,57,"onAuthStateChange"],[36,59,33,74],[36,60,34,12],[36,67,34,19,"event"],[36,72,34,24],[36,74,34,26,"session"],[36,81,34,33],[36,86,34,38],[37,8,35,16,"console"],[37,15,35,23],[37,16,35,24,"log"],[37,19,35,27],[37,20,35,28],[37,43,35,51],[37,45,35,53,"event"],[37,50,35,58],[37,52,35,60,"session"],[37,59,35,67],[37,61,35,69,"user"],[37,65,35,73],[37,67,35,75,"email"],[37,72,35,80],[37,73,35,81],[38,8,37,16],[38,12,37,20,"event"],[38,17,37,25],[38,22,37,30],[38,33,37,41],[38,37,37,45,"session"],[38,44,37,52],[38,46,37,54,"user"],[38,50,37,58],[38,52,37,60],[39,10,38,20,"setSession"],[39,20,38,30],[39,21,38,31,"session"],[39,28,38,38],[39,29,38,39],[40,10,39,20],[41,10,40,20],[41,16,40,26,"profileData"],[41,27,40,37],[41,30,40,40],[41,36,40,46,"fetchProfile"],[41,48,40,58],[41,49,40,59,"session"],[41,56,40,66],[41,57,40,67,"user"],[41,61,40,71],[41,62,40,72,"id"],[41,64,40,74],[41,65,40,75],[42,10,41,20],[42,14,41,24,"profileData"],[42,25,41,35],[42,27,41,37],[43,12,42,24,"setUser"],[43,19,42,31],[43,20,42,32,"session"],[43,27,42,39],[43,28,42,40,"user"],[43,32,42,44],[43,33,42,45],[44,12,43,24,"setProfile"],[44,22,43,34],[44,23,43,35,"profileData"],[44,34,43,46],[44,35,43,47],[45,10,44,20],[45,11,44,21],[45,17,44,27],[46,12,45,24],[47,12,46,24,"console"],[47,19,46,31],[47,20,46,32,"log"],[47,23,46,35],[47,24,46,36],[47,52,46,64],[47,53,46,65],[48,12,47,24,"setUser"],[48,19,47,31],[48,20,47,32],[48,24,47,36],[48,25,47,37],[49,12,48,24,"setProfile"],[49,22,48,34],[49,23,48,35],[49,27,48,39],[49,28,48,40],[50,10,49,20],[51,10,50,20,"setLoading"],[51,20,50,30],[51,21,50,31],[51,26,50,36],[51,27,50,37],[52,8,51,16],[52,9,51,17],[52,15,51,23],[52,19,51,27,"event"],[52,24,51,32],[52,29,51,37],[52,41,51,49],[52,43,51,51],[53,10,52,20,"setSession"],[53,20,52,30],[53,21,52,31],[53,25,52,35],[53,26,52,36],[54,10,53,20,"setUser"],[54,17,53,27],[54,18,53,28],[54,22,53,32],[54,23,53,33],[55,10,54,20,"setProfile"],[55,20,54,30],[55,21,54,31],[55,25,54,35],[55,26,54,36],[56,10,55,20,"setLoading"],[56,20,55,30],[56,21,55,31],[56,26,55,36],[56,27,55,37],[57,8,56,16],[58,6,57,12],[58,7,58,8],[58,8,58,9],[59,6,60,8],[59,13,60,15],[59,19,60,21,"subscription"],[59,31,60,33],[59,32,60,34,"unsubscribe"],[59,43,60,45],[59,44,60,46],[59,45,60,47],[60,4,61,4],[60,5,61,5],[60,7,61,7],[60,9,61,9],[60,10,61,10],[61,4,63,4],[61,10,63,10,"initializeAuth"],[61,24,63,24],[61,27,63,27],[61,33,63,27,"initializeAuth"],[61,34,63,27],[61,39,63,39],[62,6,64,8],[62,10,64,12],[63,8,65,12],[63,14,65,18],[64,10,65,20,"data"],[64,14,65,24],[64,16,65,26],[65,12,65,28,"session"],[66,10,65,36],[67,8,65,38],[67,9,65,39],[67,12,65,42],[67,18,65,48,"supabase"],[67,35,65,56],[67,36,65,56,"supabase"],[67,44,65,56],[67,45,65,57,"auth"],[67,49,65,61],[67,50,65,62,"getSession"],[67,60,65,72],[67,61,65,73],[67,62,65,74],[68,8,66,12,"console"],[68,15,66,19],[68,16,66,20,"log"],[68,19,66,23],[68,20,66,24],[68,41,66,45],[68,43,66,47,"session"],[68,50,66,54],[68,52,66,56,"user"],[68,56,66,60],[68,58,66,62,"email"],[68,63,66,67],[68,64,66,68],[69,8,68,12],[69,12,68,16,"session"],[69,19,68,23],[69,21,68,25,"user"],[69,25,68,29],[69,27,68,31],[70,10,69,16,"setSession"],[70,20,69,26],[70,21,69,27,"session"],[70,28,69,34],[70,29,69,35],[71,10,70,16],[71,16,70,22,"profileData"],[71,27,70,33],[71,30,70,36],[71,36,70,42,"fetchProfile"],[71,48,70,54],[71,49,70,55,"session"],[71,56,70,62],[71,57,70,63,"user"],[71,61,70,67],[71,62,70,68,"id"],[71,64,70,70],[71,65,70,71],[72,10,71,16],[72,14,71,20,"profileData"],[72,25,71,31],[72,27,71,33],[73,12,72,20,"setUser"],[73,19,72,27],[73,20,72,28,"session"],[73,27,72,35],[73,28,72,36,"user"],[73,32,72,40],[73,33,72,41],[74,12,73,20,"setProfile"],[74,22,73,30],[74,23,73,31,"profileData"],[74,34,73,42],[74,35,73,43],[75,10,74,16],[75,11,74,17],[75,17,74,23],[76,12,75,20,"console"],[76,19,75,27],[76,20,75,28,"log"],[76,23,75,31],[76,24,75,32],[76,46,75,54],[76,47,75,55],[77,12,76,20,"setUser"],[77,19,76,27],[77,20,76,28],[77,24,76,32],[77,25,76,33],[78,10,77,16],[79,8,78,12],[80,6,79,8],[80,7,79,9],[80,8,79,10],[80,15,79,17,"error"],[80,20,79,22],[80,22,79,24],[81,8,80,12,"console"],[81,15,80,19],[81,16,80,20,"error"],[81,21,80,25],[81,22,80,26],[81,40,80,44],[81,42,80,46,"error"],[81,47,80,51],[81,48,80,52],[82,6,81,8],[82,7,81,9],[82,16,81,18],[83,8,82,12,"setLoading"],[83,18,82,22],[83,19,82,23],[83,24,82,28],[83,25,82,29],[84,6,83,8],[85,4,84,4],[85,5,84,5],[87,4,86,4],[88,4,87,4],[88,10,87,10,"fetchProfile"],[88,22,87,22],[88,25,87,25],[88,31,87,32,"userId"],[88,37,87,46],[88,41,87,72],[89,6,88,8],[89,10,88,12],[90,8,89,12,"console"],[90,15,89,19],[90,16,89,20,"log"],[90,19,89,23],[90,20,89,24],[90,46,89,50],[90,48,89,52,"userId"],[90,54,89,58],[90,55,89,59],[91,8,90,12],[91,14,90,18],[92,10,90,20,"data"],[92,14,90,24],[93,10,90,26,"error"],[94,8,90,32],[94,9,90,33],[94,12,90,36],[94,18,90,42,"supabase"],[94,35,90,50],[94,36,90,50,"supabase"],[94,44,90,50],[94,45,91,17,"from"],[94,49,91,21],[94,50,91,22],[94,60,91,32],[94,61,91,33],[94,62,92,17,"select"],[94,68,92,23],[94,69,92,24],[94,72,92,27],[94,73,92,28],[94,74,93,17,"eq"],[94,76,93,19],[94,77,93,20],[94,81,93,24],[94,83,93,26,"userId"],[94,89,93,32],[94,90,93,33],[94,91,94,17,"single"],[94,97,94,23],[94,98,94,24],[94,99,94,25],[95,8,96,12],[95,12,96,16,"data"],[95,16,96,20],[95,20,96,24],[95,21,96,25,"error"],[95,26,96,30],[95,28,96,32],[96,10,97,16,"console"],[96,17,97,23],[96,18,97,24,"log"],[96,21,97,27],[96,22,97,28],[96,40,97,46],[96,42,97,48,"data"],[96,46,97,52],[96,47,97,53,"email"],[96,52,97,58],[96,53,97,59],[97,10,98,16],[97,17,98,23,"data"],[97,21,98,27],[98,8,99,12],[98,9,99,13],[98,15,99,19],[99,10,100,16,"console"],[99,17,100,23],[99,18,100,24,"log"],[99,21,100,27],[99,22,100,28],[99,42,100,48],[99,43,100,49],[100,10,101,16],[100,17,101,23],[100,21,101,27],[101,8,102,12],[102,6,103,8],[102,7,103,9],[102,8,103,10],[102,15,103,17,"error"],[102,20,103,22],[102,22,103,24],[103,8,104,12,"console"],[103,15,104,19],[103,16,104,20,"error"],[103,21,104,25],[103,22,104,26],[103,44,104,48],[103,46,104,50,"error"],[103,51,104,55],[103,52,104,56],[104,8,105,12],[104,15,105,19],[104,19,105,23],[105,6,106,8],[106,4,107,4],[106,5,107,5],[107,4,109,4],[107,10,109,10,"refreshProfile"],[107,24,109,24],[107,27,109,27],[107,33,109,27,"refreshProfile"],[107,34,109,27],[107,39,109,39],[108,6,110,8],[108,10,110,12,"session"],[108,17,110,19],[108,19,110,21,"user"],[108,23,110,25],[108,25,110,27],[109,8,111,12],[109,14,111,18,"profileData"],[109,25,111,29],[109,28,111,32],[109,34,111,38,"fetchProfile"],[109,46,111,50],[109,47,111,51,"session"],[109,54,111,58],[109,55,111,59,"user"],[109,59,111,63],[109,60,111,64,"id"],[109,62,111,66],[109,63,111,67],[110,8,112,12],[110,12,112,16,"profileData"],[110,23,112,27],[110,25,112,29],[111,10,113,16,"setProfile"],[111,20,113,26],[111,21,113,27,"profileData"],[111,32,113,38],[111,33,113,39],[112,10,114,16,"setUser"],[112,17,114,23],[112,18,114,24,"session"],[112,25,114,31],[112,26,114,32,"user"],[112,30,114,36],[112,31,114,37],[113,8,115,12],[114,6,116,8],[115,4,117,4],[115,5,117,5],[116,4,119,4],[116,10,119,10,"signOut"],[116,17,119,17],[116,20,119,20],[116,26,119,20,"signOut"],[116,27,119,20],[116,32,119,32],[117,6,120,8],[117,10,120,12],[118,8,121,12,"setSession"],[118,18,121,22],[118,19,121,23],[118,23,121,27],[118,24,121,28],[119,8,122,12,"setUser"],[119,15,122,19],[119,16,122,20],[119,20,122,24],[119,21,122,25],[120,8,123,12,"setProfile"],[120,18,123,22],[120,19,123,23],[120,23,123,27],[120,24,123,28],[121,8,124,12],[121,14,124,18,"supabase"],[121,31,124,26],[121,32,124,26,"supabase"],[121,40,124,26],[121,41,124,27,"auth"],[121,45,124,31],[121,46,124,32,"signOut"],[121,53,124,39],[121,54,124,40],[121,55,124,41],[122,6,125,8],[122,7,125,9],[122,8,125,10],[122,15,125,17,"error"],[122,20,125,22],[122,22,125,24],[123,8,126,12,"console"],[123,15,126,19],[123,16,126,20,"error"],[123,21,126,25],[123,22,126,26],[123,39,126,43],[123,41,126,45,"error"],[123,46,126,50],[123,47,126,51],[124,6,127,8],[125,4,128,4],[125,5,128,5],[126,4,130,4],[126,10,130,10,"value"],[126,15,130,15],[126,18,130,18],[127,6,131,8,"session"],[127,13,131,15],[128,6,132,8,"user"],[128,10,132,12],[129,6,133,8,"profile"],[129,13,133,15],[130,6,134,8,"loading"],[130,13,134,15],[131,6,135,8,"signOut"],[131,13,135,15],[132,6,136,8,"refreshProfile"],[133,4,137,4],[133,5,137,5],[134,4,139,4],[134,24,139,11],[134,28,139,11,"_reactJsxDevRuntime"],[134,47,139,11],[134,48,139,11,"jsxDEV"],[134,54,139,11],[134,56,139,12,"AuthContext"],[134,67,139,23],[134,68,139,24,"Provider"],[134,76,139,32],[135,6,139,33,"value"],[135,11,139,38],[135,13,139,40,"value"],[135,18,139,46],[136,6,139,46,"children"],[136,14,139,46],[136,16,139,48,"children"],[137,4,139,56],[138,6,139,56,"fileName"],[138,14,139,56],[138,16,139,56,"_jsxFileName"],[138,28,139,56],[139,6,139,56,"lineNumber"],[139,16,139,56],[140,6,139,56,"columnNumber"],[140,18,139,56],[141,4,139,56],[141,11,139,79],[141,12,139,80],[142,2,140,0],[143,2,142,7],[143,11,142,16,"useAuth"],[143,18,142,23,"useAuth"],[143,19,142,23],[143,21,142,26],[144,4,143,4],[144,10,143,10,"context"],[144,17,143,17],[144,20,143,20],[144,24,143,20,"useContext"],[144,30,143,30],[144,31,143,30,"useContext"],[144,41,143,30],[144,43,143,31,"AuthContext"],[144,54,143,42],[144,55,143,43],[145,4,144,4],[145,8,144,8,"context"],[145,15,144,15],[145,20,144,20,"undefined"],[145,29,144,29],[145,31,144,31],[146,6,145,8],[146,12,145,14],[146,16,145,18,"Error"],[146,21,145,23],[146,22,145,24],[146,67,145,69],[146,68,145,70],[147,4,146,4],[148,4,147,4],[148,11,147,11,"context"],[148,18,147,18],[149,2,148,0],[150,0,148,1],[150,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","supabase.auth.onAuthStateChange$argument_0","<anonymous>","initializeAuth","fetchProfile","refreshProfile","signOut","useAuth"],"mappings":"AAA;OCe;cCM;YCY;aDuB;eEG,gCF;KDC;2BIE;KJqB;yBKG;KLoB;2BME;KNQ;oBOE;KPS;CDY;OSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}