{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"processRecurringDates\", {\n    enumerable: true,\n    get: function () {\n      return processRecurringDates;\n    }\n  });\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[0], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  /**\n   * Process recurring event dates to set the closest future date as main date\n   * and remaining future dates as recurring_dates.\n   *\n   * For recurring events: IGNORE the main date field (often wrong from AI) and use only recurring_dates.\n   * For non-recurring events: use the main date.\n   *\n   * @param mainDateStr - The main date from analysis (format: YYYY-MM-DD or DD-MM-YYYY)\n   * @param recurringDatesStr - Array of recurring dates (format: YYYY-MM-DD)\n   * @param isRecurringEvent - Whether the event is marked as recurring\n   * @returns { mainDate: Date | null, recurringDates: Date[], isRecurring: boolean }\n   */\n  var processRecurringDates = function (mainDateStr, recurringDatesStr) {\n    var isRecurringEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var today = new Date();\n    today.setHours(0, 0, 0, 0);\n\n    // Helper to parse a date string (handles YYYY-MM-DD and DD-MM-YYYY)\n    var parseDate = dateStr => {\n      var parts = dateStr.split(/[-/]/).map(Number);\n      if (parts.length === 3) {\n        var year, month, day;\n        if (parts[0] > 1000) {\n          // YYYY-MM-DD\n          var _parts = (0, _slicedToArray.default)(parts, 3);\n          year = _parts[0];\n          month = _parts[1];\n          day = _parts[2];\n        } else {\n          // DD-MM-YYYY\n          var _parts2 = (0, _slicedToArray.default)(parts, 3);\n          day = _parts2[0];\n          month = _parts2[1];\n          year = _parts2[2];\n        }\n        var date = new Date(year, month - 1, day);\n        return isNaN(date.getTime()) ? null : date;\n      } else if (parts.length === 2) {\n        // DD-MM format, add current year\n        var currentYear = new Date().getFullYear();\n        var _parts3 = (0, _slicedToArray.default)(parts, 2),\n          _day = _parts3[0],\n          _month = _parts3[1];\n        var _date = new Date(currentYear, _month - 1, _day);\n        return isNaN(_date.getTime()) ? null : _date;\n      }\n      return null;\n    };\n\n    // For recurring events with recurring_dates: ONLY use recurring_dates (ignore mainDateStr)\n    // The AI often puts wrong dates in the main date field for recurring events\n    if (isRecurringEvent && recurringDatesStr && recurringDatesStr.length > 0) {\n      var recurringParsed = [];\n      for (var dateStr of recurringDatesStr) {\n        var date = parseDate(dateStr);\n        if (date) recurringParsed.push(date);\n      }\n      if (recurringParsed.length > 0) {\n        // Sort all dates\n        recurringParsed.sort((a, b) => a.getTime() - b.getTime());\n\n        // Filter future dates\n        var futureDates = recurringParsed.filter(d => d >= today);\n        if (futureDates.length > 0) {\n          // First future date is main, rest are recurring\n          return {\n            mainDate: futureDates[0],\n            recurringDates: futureDates.slice(1),\n            isRecurring: futureDates.length > 1\n          };\n        } else {\n          // All dates in past - use the last (most recent) one\n          return {\n            mainDate: recurringParsed[recurringParsed.length - 1],\n            recurringDates: recurringParsed.slice(0, -1),\n            isRecurring: recurringParsed.length > 1\n          };\n        }\n      }\n    }\n\n    // Non-recurring event or no recurring_dates: just use main date\n    if (mainDateStr && mainDateStr !== 'No especificado') {\n      var mainDate = parseDate(mainDateStr);\n      if (mainDate) {\n        return {\n          mainDate,\n          recurringDates: [],\n          isRecurring: false\n        };\n      }\n    }\n    return {\n      mainDate: null,\n      recurringDates: [],\n      isRecurring: false\n    };\n  };\n});","lineCount":118,"map":[[12,2,13,0,"Object"],[12,8,13,0],[12,9,13,0,"defineProperty"],[12,23,13,0],[12,24,13,0,"exports"],[12,31,13,0],[13,4,13,0,"enumerable"],[13,14,13,0],[14,4,13,0,"get"],[14,7,13,0],[14,18,13,0,"get"],[14,19,13,0],[15,6,13,0],[15,13,13,0,"processRecurringDates"],[15,34,13,0],[16,4,13,0],[17,2,13,0],[18,2,88,2],[18,6,88,2,"_babelRuntimeHelpersSlicedToArray"],[18,39,88,2],[18,42,88,2,"require"],[18,49,88,2],[18,50,88,2,"_dependencyMap"],[18,64,88,2],[19,2,88,2],[19,6,88,2,"_slicedToArray"],[19,20,88,2],[19,23,88,2,"_interopDefault"],[19,38,88,2],[19,39,88,2,"_babelRuntimeHelpersSlicedToArray"],[19,72,88,2],[20,2,1,0],[21,0,2,0],[22,0,3,0],[23,0,4,0],[24,0,5,0],[25,0,6,0],[26,0,7,0],[27,0,8,0],[28,0,9,0],[29,0,10,0],[30,0,11,0],[31,0,12,0],[32,2,13,7],[32,6,13,13,"processRecurringDates"],[32,27,13,34],[32,30,13,37],[32,39,13,37,"processRecurringDates"],[32,40,14,4,"mainDateStr"],[32,51,14,42],[32,53,15,4,"recurringDatesStr"],[32,70,15,50],[32,72,17,78],[33,4,17,78],[33,8,16,4,"isRecurringEvent"],[33,24,16,29],[33,27,16,29,"arguments"],[33,36,16,29],[33,37,16,29,"length"],[33,43,16,29],[33,51,16,29,"arguments"],[33,60,16,29],[33,68,16,29,"undefined"],[33,77,16,29],[33,80,16,29,"arguments"],[33,89,16,29],[33,95,16,32],[33,100,16,37],[34,4,18,4],[34,8,18,10,"today"],[34,13,18,15],[34,16,18,18],[34,20,18,22,"Date"],[34,24,18,26],[34,25,18,27],[34,26,18,28],[35,4,19,4,"today"],[35,9,19,9],[35,10,19,10,"setHours"],[35,18,19,18],[35,19,19,19],[35,20,19,20],[35,22,19,22],[35,23,19,23],[35,25,19,25],[35,26,19,26],[35,28,19,28],[35,29,19,29],[35,30,19,30],[37,4,21,4],[38,4,22,4],[38,8,22,10,"parseDate"],[38,17,22,19],[38,20,22,23,"dateStr"],[38,27,22,38],[38,31,22,56],[39,6,23,8],[39,10,23,14,"parts"],[39,15,23,19],[39,18,23,22,"dateStr"],[39,25,23,29],[39,26,23,30,"split"],[39,31,23,35],[39,32,23,36],[39,38,23,42],[39,39,23,43],[39,40,23,44,"map"],[39,43,23,47],[39,44,23,48,"Number"],[39,50,23,54],[39,51,23,55],[40,6,24,8],[40,10,24,12,"parts"],[40,15,24,17],[40,16,24,18,"length"],[40,22,24,24],[40,27,24,29],[40,28,24,30],[40,30,24,32],[41,8,25,12],[41,12,25,16,"year"],[41,16,25,28],[41,18,25,30,"month"],[41,23,25,43],[41,25,25,45,"day"],[41,28,25,56],[42,8,26,12],[42,12,26,16,"parts"],[42,17,26,21],[42,18,26,22],[42,19,26,23],[42,20,26,24],[42,23,26,27],[42,27,26,31],[42,29,26,33],[43,10,27,16],[44,10,27,16],[44,14,27,16,"_parts"],[44,20,27,16],[44,27,27,16,"_slicedToArray"],[44,41,27,16],[44,42,27,16,"default"],[44,49,27,16],[44,51,28,37,"parts"],[44,56,28,42],[45,10,28,17,"year"],[45,14,28,21],[45,17,28,21,"_parts"],[45,23,28,21],[46,10,28,23,"month"],[46,15,28,28],[46,18,28,28,"_parts"],[46,24,28,28],[47,10,28,30,"day"],[47,13,28,33],[47,16,28,33,"_parts"],[47,22,28,33],[48,8,29,12],[48,9,29,13],[48,15,29,19],[49,10,30,16],[50,10,30,16],[50,14,30,16,"_parts2"],[50,21,30,16],[50,28,30,16,"_slicedToArray"],[50,42,30,16],[50,43,30,16,"default"],[50,50,30,16],[50,52,31,37,"parts"],[50,57,31,42],[51,10,31,17,"day"],[51,13,31,20],[51,16,31,20,"_parts2"],[51,23,31,20],[52,10,31,22,"month"],[52,15,31,27],[52,18,31,27,"_parts2"],[52,25,31,27],[53,10,31,29,"year"],[53,14,31,33],[53,17,31,33,"_parts2"],[53,24,31,33],[54,8,32,12],[55,8,33,12],[55,12,33,18,"date"],[55,16,33,22],[55,19,33,25],[55,23,33,29,"Date"],[55,27,33,33],[55,28,33,34,"year"],[55,32,33,38],[55,34,33,40,"month"],[55,39,33,45],[55,42,33,48],[55,43,33,49],[55,45,33,51,"day"],[55,48,33,54],[55,49,33,55],[56,8,34,12],[56,15,34,19,"isNaN"],[56,20,34,24],[56,21,34,25,"date"],[56,25,34,29],[56,26,34,30,"getTime"],[56,33,34,37],[56,34,34,38],[56,35,34,39],[56,36,34,40],[56,39,34,43],[56,43,34,47],[56,46,34,50,"date"],[56,50,34,54],[57,6,35,8],[57,7,35,9],[57,13,35,15],[57,17,35,19,"parts"],[57,22,35,24],[57,23,35,25,"length"],[57,29,35,31],[57,34,35,36],[57,35,35,37],[57,37,35,39],[58,8,36,12],[59,8,37,12],[59,12,37,18,"currentYear"],[59,23,37,29],[59,26,37,32],[59,30,37,36,"Date"],[59,34,37,40],[59,35,37,41],[59,36,37,42],[59,37,37,43,"getFullYear"],[59,48,37,54],[59,49,37,55],[59,50,37,56],[60,8,38,12],[60,12,38,12,"_parts3"],[60,19,38,12],[60,26,38,12,"_slicedToArray"],[60,40,38,12],[60,41,38,12,"default"],[60,48,38,12],[60,50,38,33,"parts"],[60,55,38,38],[61,10,38,19,"day"],[61,14,38,22],[61,17,38,22,"_parts3"],[61,24,38,22],[62,10,38,24,"month"],[62,16,38,29],[62,19,38,29,"_parts3"],[62,26,38,29],[63,8,39,12],[63,12,39,18,"date"],[63,17,39,22],[63,20,39,25],[63,24,39,29,"Date"],[63,28,39,33],[63,29,39,34,"currentYear"],[63,40,39,45],[63,42,39,47,"month"],[63,48,39,52],[63,51,39,55],[63,52,39,56],[63,54,39,58,"day"],[63,58,39,61],[63,59,39,62],[64,8,40,12],[64,15,40,19,"isNaN"],[64,20,40,24],[64,21,40,25,"date"],[64,26,40,29],[64,27,40,30,"getTime"],[64,34,40,37],[64,35,40,38],[64,36,40,39],[64,37,40,40],[64,40,40,43],[64,44,40,47],[64,47,40,50,"date"],[64,52,40,54],[65,6,41,8],[66,6,42,8],[66,13,42,15],[66,17,42,19],[67,4,43,4],[67,5,43,5],[69,4,45,4],[70,4,46,4],[71,4,47,4],[71,8,47,8,"isRecurringEvent"],[71,24,47,24],[71,28,47,28,"recurringDatesStr"],[71,45,47,45],[71,49,47,49,"recurringDatesStr"],[71,66,47,66],[71,67,47,67,"length"],[71,73,47,73],[71,76,47,76],[71,77,47,77],[71,79,47,79],[72,6,48,8],[72,10,48,14,"recurringParsed"],[72,25,48,37],[72,28,48,40],[72,30,48,42],[73,6,49,8],[73,11,49,13],[73,15,49,19,"dateStr"],[73,22,49,26],[73,26,49,30,"recurringDatesStr"],[73,43,49,47],[73,45,49,49],[74,8,50,12],[74,12,50,18,"date"],[74,16,50,22],[74,19,50,25,"parseDate"],[74,28,50,34],[74,29,50,35,"dateStr"],[74,36,50,42],[74,37,50,43],[75,8,51,12],[75,12,51,16,"date"],[75,16,51,20],[75,18,51,22,"recurringParsed"],[75,33,51,37],[75,34,51,38,"push"],[75,38,51,42],[75,39,51,43,"date"],[75,43,51,47],[75,44,51,48],[76,6,52,8],[77,6,54,8],[77,10,54,12,"recurringParsed"],[77,25,54,27],[77,26,54,28,"length"],[77,32,54,34],[77,35,54,37],[77,36,54,38],[77,38,54,40],[78,8,55,12],[79,8,56,12,"recurringParsed"],[79,23,56,27],[79,24,56,28,"sort"],[79,28,56,32],[79,29,56,33],[79,30,56,34,"a"],[79,31,56,35],[79,33,56,37,"b"],[79,34,56,38],[79,39,56,43,"a"],[79,40,56,44],[79,41,56,45,"getTime"],[79,48,56,52],[79,49,56,53],[79,50,56,54],[79,53,56,57,"b"],[79,54,56,58],[79,55,56,59,"getTime"],[79,62,56,66],[79,63,56,67],[79,64,56,68],[79,65,56,69],[81,8,58,12],[82,8,59,12],[82,12,59,18,"futureDates"],[82,23,59,29],[82,26,59,32,"recurringParsed"],[82,41,59,47],[82,42,59,48,"filter"],[82,48,59,54],[82,49,59,55,"d"],[82,50,59,56],[82,54,59,60,"d"],[82,55,59,61],[82,59,59,65,"today"],[82,64,59,70],[82,65,59,71],[83,8,61,12],[83,12,61,16,"futureDates"],[83,23,61,27],[83,24,61,28,"length"],[83,30,61,34],[83,33,61,37],[83,34,61,38],[83,36,61,40],[84,10,62,16],[85,10,63,16],[85,17,63,23],[86,12,64,20,"mainDate"],[86,20,64,28],[86,22,64,30,"futureDates"],[86,33,64,41],[86,34,64,42],[86,35,64,43],[86,36,64,44],[87,12,65,20,"recurringDates"],[87,26,65,34],[87,28,65,36,"futureDates"],[87,39,65,47],[87,40,65,48,"slice"],[87,45,65,53],[87,46,65,54],[87,47,65,55],[87,48,65,56],[88,12,66,20,"isRecurring"],[88,23,66,31],[88,25,66,33,"futureDates"],[88,36,66,44],[88,37,66,45,"length"],[88,43,66,51],[88,46,66,54],[89,10,67,16],[89,11,67,17],[90,8,68,12],[90,9,68,13],[90,15,68,19],[91,10,69,16],[92,10,70,16],[92,17,70,23],[93,12,71,20,"mainDate"],[93,20,71,28],[93,22,71,30,"recurringParsed"],[93,37,71,45],[93,38,71,46,"recurringParsed"],[93,53,71,61],[93,54,71,62,"length"],[93,60,71,68],[93,63,71,71],[93,64,71,72],[93,65,71,73],[94,12,72,20,"recurringDates"],[94,26,72,34],[94,28,72,36,"recurringParsed"],[94,43,72,51],[94,44,72,52,"slice"],[94,49,72,57],[94,50,72,58],[94,51,72,59],[94,53,72,61],[94,54,72,62],[94,55,72,63],[94,56,72,64],[95,12,73,20,"isRecurring"],[95,23,73,31],[95,25,73,33,"recurringParsed"],[95,40,73,48],[95,41,73,49,"length"],[95,47,73,55],[95,50,73,58],[96,10,74,16],[96,11,74,17],[97,8,75,12],[98,6,76,8],[99,4,77,4],[101,4,79,4],[102,4,80,4],[102,8,80,8,"mainDateStr"],[102,19,80,19],[102,23,80,23,"mainDateStr"],[102,34,80,34],[102,39,80,39],[102,56,80,56],[102,58,80,58],[103,6,81,8],[103,10,81,14,"mainDate"],[103,18,81,22],[103,21,81,25,"parseDate"],[103,30,81,34],[103,31,81,35,"mainDateStr"],[103,42,81,46],[103,43,81,47],[104,6,82,8],[104,10,82,12,"mainDate"],[104,18,82,20],[104,20,82,22],[105,8,83,12],[105,15,83,19],[106,10,83,21,"mainDate"],[106,18,83,29],[107,10,83,31,"recurringDates"],[107,24,83,45],[107,26,83,47],[107,28,83,49],[108,10,83,51,"isRecurring"],[108,21,83,62],[108,23,83,64],[109,8,83,70],[109,9,83,71],[110,6,84,8],[111,4,85,4],[112,4,87,4],[112,11,87,11],[113,6,87,13,"mainDate"],[113,14,87,21],[113,16,87,23],[113,20,87,27],[114,6,87,29,"recurringDates"],[114,20,87,43],[114,22,87,45],[114,24,87,47],[115,6,87,49,"isRecurring"],[115,17,87,60],[115,19,87,62],[116,4,87,68],[116,5,87,69],[117,2,88,0],[117,3,88,1],[118,0,88,2],[118,3]],"functionMap":{"names":["<global>","processRecurringDates","parseDate","recurringParsed.sort$argument_0","recurringParsed.filter$argument_0"],"mappings":"AAA;qCCY;sBCS;KDqB;iCEa,mCF;uDGG,eH;CD6B"},"hasCjsExports":false},"type":"js/module"}]}