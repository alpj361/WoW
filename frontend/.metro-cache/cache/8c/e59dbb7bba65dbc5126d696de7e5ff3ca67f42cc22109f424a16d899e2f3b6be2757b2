{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"../services/supabase","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":48,"index":82}}],"key":"KPiafkkHXMyy0AQm6tuLQc7uw64=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useProcesionStore\", {\n    enumerable: true,\n    get: function () {\n      return useProcesionStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _servicesSupabase = require(_dependencyMap[1], \"../services/supabase\");\n  // ─── Types ──────────────────────────────────────────────────────────────────────\n\n  // ─── Store ──────────────────────────────────────────────────────────────────────\n\n  const useProcesionStore = (0, _zustand.create)((set, get) => ({\n    procesiones: [],\n    savedProcesionIds: new Set(),\n    isLoading: false,\n    error: null,\n    fetchProcesiones: async holidaySlug => {\n      set({\n        isLoading: true,\n        error: null\n      });\n      try {\n        let query = _servicesSupabase.supabase.from('procesiones').select('*').order('fecha', {\n          ascending: true\n        }).order('hora_salida', {\n          ascending: true\n        });\n        if (holidaySlug) {\n          // Join through holidays to filter by slug\n          const {\n            data: holiday\n          } = await _servicesSupabase.supabase.from('holidays').select('id').eq('slug', holidaySlug).single();\n          if (holiday) {\n            query = query.eq('holiday_id', holiday.id);\n          }\n        }\n        const {\n          data,\n          error\n        } = await query;\n        if (error) throw error;\n        set({\n          procesiones: data || [],\n          isLoading: false\n        });\n      } catch (error) {\n        console.error('[ProcesionStore] Error fetching procesiones:', error);\n        set({\n          error: error.message,\n          isLoading: false\n        });\n      }\n    },\n    fetchSavedProcesiones: async () => {\n      try {\n        const {\n          data: {\n            user\n          }\n        } = await _servicesSupabase.supabase.auth.getUser();\n        if (!user) {\n          set({\n            savedProcesionIds: new Set()\n          });\n          return;\n        }\n        const {\n          data,\n          error\n        } = await _servicesSupabase.supabase.from('saved_procesiones').select('procesion_id').eq('user_id', user.id);\n        if (error) throw error;\n        const ids = new Set((data || []).map(d => d.procesion_id));\n        set({\n          savedProcesionIds: ids\n        });\n      } catch (error) {\n        console.error('[ProcesionStore] Error fetching saved procesiones:', error);\n      }\n    },\n    toggleSaveProcesion: async procesionId => {\n      try {\n        const {\n          data: {\n            user\n          }\n        } = await _servicesSupabase.supabase.auth.getUser();\n        if (!user) throw new Error('No authenticated user');\n        const isSaved = get().savedProcesionIds.has(procesionId);\n        if (isSaved) {\n          // Unsave\n          const {\n            error\n          } = await _servicesSupabase.supabase.from('saved_procesiones').delete().eq('user_id', user.id).eq('procesion_id', procesionId);\n          if (error) throw error;\n          set(state => {\n            const next = new Set(state.savedProcesionIds);\n            next.delete(procesionId);\n            return {\n              savedProcesionIds: next\n            };\n          });\n        } else {\n          // Save\n          const {\n            error\n          } = await _servicesSupabase.supabase.from('saved_procesiones').insert({\n            user_id: user.id,\n            procesion_id: procesionId\n          });\n          if (error) throw error;\n          set(state => {\n            const next = new Set(state.savedProcesionIds);\n            next.add(procesionId);\n            return {\n              savedProcesionIds: next\n            };\n          });\n        }\n      } catch (error) {\n        console.error('[ProcesionStore] Error toggling save:', error);\n        throw error;\n      }\n    },\n    isSaved: procesionId => {\n      return get().savedProcesionIds.has(procesionId);\n    }\n  }));\n});","lineCount":135,"map":[[7,2,40,0,"Object"],[7,8,40,0],[7,9,40,0,"defineProperty"],[7,23,40,0],[7,24,40,0,"exports"],[7,31,40,0],[8,4,40,0,"enumerable"],[8,14,40,0],[9,4,40,0,"get"],[9,7,40,0],[9,18,40,0,"get"],[9,19,40,0],[10,6,40,0],[10,13,40,0,"useProcesionStore"],[10,30,40,0],[11,4,40,0],[12,2,40,0],[13,2,1,0],[13,6,1,0,"_zustand"],[13,14,1,0],[13,17,1,0,"require"],[13,24,1,0],[13,25,1,0,"_dependencyMap"],[13,39,1,0],[14,2,2,0],[14,6,2,0,"_servicesSupabase"],[14,23,2,0],[14,26,2,0,"require"],[14,33,2,0],[14,34,2,0,"_dependencyMap"],[14,48,2,0],[15,2,4,0],[17,2,38,0],[19,2,40,7],[19,8,40,13,"useProcesionStore"],[19,25,40,30],[19,28,40,33],[19,32,40,33,"create"],[19,40,40,39],[19,41,40,39,"create"],[19,47,40,39],[19,49,40,56],[19,50,40,57,"set"],[19,53,40,60],[19,55,40,62,"get"],[19,58,40,65],[19,64,40,71],[20,4,41,4,"procesiones"],[20,15,41,15],[20,17,41,17],[20,19,41,19],[21,4,42,4,"savedProcesionIds"],[21,21,42,21],[21,23,42,23],[21,27,42,27,"Set"],[21,30,42,30],[21,31,42,31],[21,32,42,32],[22,4,43,4,"isLoading"],[22,13,43,13],[22,15,43,15],[22,20,43,20],[23,4,44,4,"error"],[23,9,44,9],[23,11,44,11],[23,15,44,15],[24,4,46,4,"fetchProcesiones"],[24,20,46,20],[24,22,46,22],[24,28,46,29,"holidaySlug"],[24,39,46,49],[24,43,46,54],[25,6,47,8,"set"],[25,9,47,11],[25,10,47,12],[26,8,47,14,"isLoading"],[26,17,47,23],[26,19,47,25],[26,23,47,29],[27,8,47,31,"error"],[27,13,47,36],[27,15,47,38],[28,6,47,43],[28,7,47,44],[28,8,47,45],[29,6,48,8],[29,10,48,12],[30,8,49,12],[30,12,49,16,"query"],[30,17,49,21],[30,20,49,24,"supabase"],[30,37,49,32],[30,38,49,32,"supabase"],[30,46,49,32],[30,47,50,17,"from"],[30,51,50,21],[30,52,50,22],[30,65,50,35],[30,66,50,36],[30,67,51,17,"select"],[30,73,51,23],[30,74,51,24],[30,77,51,27],[30,78,51,28],[30,79,52,17,"order"],[30,84,52,22],[30,85,52,23],[30,92,52,30],[30,94,52,32],[31,10,52,34,"ascending"],[31,19,52,43],[31,21,52,45],[32,8,52,50],[32,9,52,51],[32,10,52,52],[32,11,53,17,"order"],[32,16,53,22],[32,17,53,23],[32,30,53,36],[32,32,53,38],[33,10,53,40,"ascending"],[33,19,53,49],[33,21,53,51],[34,8,53,56],[34,9,53,57],[34,10,53,58],[35,8,55,12],[35,12,55,16,"holidaySlug"],[35,23,55,27],[35,25,55,29],[36,10,56,16],[37,10,57,16],[37,16,57,22],[38,12,57,24,"data"],[38,16,57,28],[38,18,57,30,"holiday"],[39,10,57,38],[39,11,57,39],[39,14,57,42],[39,20,57,48,"supabase"],[39,37,57,56],[39,38,57,56,"supabase"],[39,46,57,56],[39,47,58,21,"from"],[39,51,58,25],[39,52,58,26],[39,62,58,36],[39,63,58,37],[39,64,59,21,"select"],[39,70,59,27],[39,71,59,28],[39,75,59,32],[39,76,59,33],[39,77,60,21,"eq"],[39,79,60,23],[39,80,60,24],[39,86,60,30],[39,88,60,32,"holidaySlug"],[39,99,60,43],[39,100,60,44],[39,101,61,21,"single"],[39,107,61,27],[39,108,61,28],[39,109,61,29],[40,10,63,16],[40,14,63,20,"holiday"],[40,21,63,27],[40,23,63,29],[41,12,64,20,"query"],[41,17,64,25],[41,20,64,28,"query"],[41,25,64,33],[41,26,64,34,"eq"],[41,28,64,36],[41,29,64,37],[41,41,64,49],[41,43,64,51,"holiday"],[41,50,64,58],[41,51,64,59,"id"],[41,53,64,61],[41,54,64,62],[42,10,65,16],[43,8,66,12],[44,8,68,12],[44,14,68,18],[45,10,68,20,"data"],[45,14,68,24],[46,10,68,26,"error"],[47,8,68,32],[47,9,68,33],[47,12,68,36],[47,18,68,42,"query"],[47,23,68,47],[48,8,69,12],[48,12,69,16,"error"],[48,17,69,21],[48,19,69,23],[48,25,69,29,"error"],[48,30,69,34],[49,8,71,12,"set"],[49,11,71,15],[49,12,71,16],[50,10,72,16,"procesiones"],[50,21,72,27],[50,23,72,30,"data"],[50,27,72,34],[50,31,72,38],[50,33,72,58],[51,10,73,16,"isLoading"],[51,19,73,25],[51,21,73,27],[52,8,74,12],[52,9,74,13],[52,10,74,14],[53,6,75,8],[53,7,75,9],[53,8,75,10],[53,15,75,17,"error"],[53,20,75,27],[53,22,75,29],[54,8,76,12,"console"],[54,15,76,19],[54,16,76,20,"error"],[54,21,76,25],[54,22,76,26],[54,68,76,72],[54,70,76,74,"error"],[54,75,76,79],[54,76,76,80],[55,8,77,12,"set"],[55,11,77,15],[55,12,77,16],[56,10,77,18,"error"],[56,15,77,23],[56,17,77,25,"error"],[56,22,77,30],[56,23,77,31,"message"],[56,30,77,38],[57,10,77,40,"isLoading"],[57,19,77,49],[57,21,77,51],[58,8,77,57],[58,9,77,58],[58,10,77,59],[59,6,78,8],[60,4,79,4],[60,5,79,5],[61,4,81,4,"fetchSavedProcesiones"],[61,25,81,25],[61,27,81,27],[61,33,81,27,"fetchSavedProcesiones"],[61,34,81,27],[61,39,81,39],[62,6,82,8],[62,10,82,12],[63,8,83,12],[63,14,83,18],[64,10,83,20,"data"],[64,14,83,24],[64,16,83,26],[65,12,83,28,"user"],[66,10,83,33],[67,8,83,35],[67,9,83,36],[67,12,83,39],[67,18,83,45,"supabase"],[67,35,83,53],[67,36,83,53,"supabase"],[67,44,83,53],[67,45,83,54,"auth"],[67,49,83,58],[67,50,83,59,"getUser"],[67,57,83,66],[67,58,83,67],[67,59,83,68],[68,8,84,12],[68,12,84,16],[68,13,84,17,"user"],[68,17,84,21],[68,19,84,23],[69,10,85,16,"set"],[69,13,85,19],[69,14,85,20],[70,12,85,22,"savedProcesionIds"],[70,29,85,39],[70,31,85,41],[70,35,85,45,"Set"],[70,38,85,48],[70,39,85,49],[71,10,85,51],[71,11,85,52],[71,12,85,53],[72,10,86,16],[73,8,87,12],[74,8,89,12],[74,14,89,18],[75,10,89,20,"data"],[75,14,89,24],[76,10,89,26,"error"],[77,8,89,32],[77,9,89,33],[77,12,89,36],[77,18,89,42,"supabase"],[77,35,89,50],[77,36,89,50,"supabase"],[77,44,89,50],[77,45,90,17,"from"],[77,49,90,21],[77,50,90,22],[77,69,90,41],[77,70,90,42],[77,71,91,17,"select"],[77,77,91,23],[77,78,91,24],[77,92,91,38],[77,93,91,39],[77,94,92,17,"eq"],[77,96,92,19],[77,97,92,20],[77,106,92,29],[77,108,92,31,"user"],[77,112,92,35],[77,113,92,36,"id"],[77,115,92,38],[77,116,92,39],[78,8,94,12],[78,12,94,16,"error"],[78,17,94,21],[78,19,94,23],[78,25,94,29,"error"],[78,30,94,34],[79,8,96,12],[79,14,96,18,"ids"],[79,17,96,21],[79,20,96,24],[79,24,96,28,"Set"],[79,27,96,31],[79,28,96,32],[79,29,96,33,"data"],[79,33,96,37],[79,37,96,41],[79,39,96,43],[79,41,96,45,"map"],[79,44,96,48],[79,45,96,50,"d"],[79,46,96,56],[79,50,96,61,"d"],[79,51,96,62],[79,52,96,63,"procesion_id"],[79,64,96,75],[79,65,96,76],[79,66,96,77],[80,8,97,12,"set"],[80,11,97,15],[80,12,97,16],[81,10,97,18,"savedProcesionIds"],[81,27,97,35],[81,29,97,37,"ids"],[82,8,97,41],[82,9,97,42],[82,10,97,43],[83,6,98,8],[83,7,98,9],[83,8,98,10],[83,15,98,17,"error"],[83,20,98,27],[83,22,98,29],[84,8,99,12,"console"],[84,15,99,19],[84,16,99,20,"error"],[84,21,99,25],[84,22,99,26],[84,74,99,78],[84,76,99,80,"error"],[84,81,99,85],[84,82,99,86],[85,6,100,8],[86,4,101,4],[86,5,101,5],[87,4,103,4,"toggleSaveProcesion"],[87,23,103,23],[87,25,103,25],[87,31,103,32,"procesionId"],[87,42,103,51],[87,46,103,56],[88,6,104,8],[88,10,104,12],[89,8,105,12],[89,14,105,18],[90,10,105,20,"data"],[90,14,105,24],[90,16,105,26],[91,12,105,28,"user"],[92,10,105,33],[93,8,105,35],[93,9,105,36],[93,12,105,39],[93,18,105,45,"supabase"],[93,35,105,53],[93,36,105,53,"supabase"],[93,44,105,53],[93,45,105,54,"auth"],[93,49,105,58],[93,50,105,59,"getUser"],[93,57,105,66],[93,58,105,67],[93,59,105,68],[94,8,106,12],[94,12,106,16],[94,13,106,17,"user"],[94,17,106,21],[94,19,106,23],[94,25,106,29],[94,29,106,33,"Error"],[94,34,106,38],[94,35,106,39],[94,58,106,62],[94,59,106,63],[95,8,108,12],[95,14,108,18,"isSaved"],[95,21,108,25],[95,24,108,28,"get"],[95,27,108,31],[95,28,108,32],[95,29,108,33],[95,30,108,34,"savedProcesionIds"],[95,47,108,51],[95,48,108,52,"has"],[95,51,108,55],[95,52,108,56,"procesionId"],[95,63,108,67],[95,64,108,68],[96,8,110,12],[96,12,110,16,"isSaved"],[96,19,110,23],[96,21,110,25],[97,10,111,16],[98,10,112,16],[98,16,112,22],[99,12,112,24,"error"],[100,10,112,30],[100,11,112,31],[100,14,112,34],[100,20,112,40,"supabase"],[100,37,112,48],[100,38,112,48,"supabase"],[100,46,112,48],[100,47,113,21,"from"],[100,51,113,25],[100,52,113,26],[100,71,113,45],[100,72,113,46],[100,73,114,21,"delete"],[100,79,114,27],[100,80,114,28],[100,81,114,29],[100,82,115,21,"eq"],[100,84,115,23],[100,85,115,24],[100,94,115,33],[100,96,115,35,"user"],[100,100,115,39],[100,101,115,40,"id"],[100,103,115,42],[100,104,115,43],[100,105,116,21,"eq"],[100,107,116,23],[100,108,116,24],[100,122,116,38],[100,124,116,40,"procesionId"],[100,135,116,51],[100,136,116,52],[101,10,118,16],[101,14,118,20,"error"],[101,19,118,25],[101,21,118,27],[101,27,118,33,"error"],[101,32,118,38],[102,10,120,16,"set"],[102,13,120,19],[102,14,120,20,"state"],[102,19,120,25],[102,23,120,29],[103,12,121,20],[103,18,121,26,"next"],[103,22,121,30],[103,25,121,33],[103,29,121,37,"Set"],[103,32,121,40],[103,33,121,41,"state"],[103,38,121,46],[103,39,121,47,"savedProcesionIds"],[103,56,121,64],[103,57,121,65],[104,12,122,20,"next"],[104,16,122,24],[104,17,122,25,"delete"],[104,23,122,31],[104,24,122,32,"procesionId"],[104,35,122,43],[104,36,122,44],[105,12,123,20],[105,19,123,27],[106,14,123,29,"savedProcesionIds"],[106,31,123,46],[106,33,123,48,"next"],[107,12,123,53],[107,13,123,54],[108,10,124,16],[108,11,124,17],[108,12,124,18],[109,8,125,12],[109,9,125,13],[109,15,125,19],[110,10,126,16],[111,10,127,16],[111,16,127,22],[112,12,127,24,"error"],[113,10,127,30],[113,11,127,31],[113,14,127,34],[113,20,127,40,"supabase"],[113,37,127,48],[113,38,127,48,"supabase"],[113,46,127,48],[113,47,128,21,"from"],[113,51,128,25],[113,52,128,26],[113,71,128,45],[113,72,128,46],[113,73,129,21,"insert"],[113,79,129,27],[113,80,129,28],[114,12,130,24,"user_id"],[114,19,130,31],[114,21,130,33,"user"],[114,25,130,37],[114,26,130,38,"id"],[114,28,130,40],[115,12,131,24,"procesion_id"],[115,24,131,36],[115,26,131,38,"procesionId"],[116,10,132,20],[116,11,132,21],[116,12,132,22],[117,10,134,16],[117,14,134,20,"error"],[117,19,134,25],[117,21,134,27],[117,27,134,33,"error"],[117,32,134,38],[118,10,136,16,"set"],[118,13,136,19],[118,14,136,20,"state"],[118,19,136,25],[118,23,136,29],[119,12,137,20],[119,18,137,26,"next"],[119,22,137,30],[119,25,137,33],[119,29,137,37,"Set"],[119,32,137,40],[119,33,137,41,"state"],[119,38,137,46],[119,39,137,47,"savedProcesionIds"],[119,56,137,64],[119,57,137,65],[120,12,138,20,"next"],[120,16,138,24],[120,17,138,25,"add"],[120,20,138,28],[120,21,138,29,"procesionId"],[120,32,138,40],[120,33,138,41],[121,12,139,20],[121,19,139,27],[122,14,139,29,"savedProcesionIds"],[122,31,139,46],[122,33,139,48,"next"],[123,12,139,53],[123,13,139,54],[124,10,140,16],[124,11,140,17],[124,12,140,18],[125,8,141,12],[126,6,142,8],[126,7,142,9],[126,8,142,10],[126,15,142,17,"error"],[126,20,142,27],[126,22,142,29],[127,8,143,12,"console"],[127,15,143,19],[127,16,143,20,"error"],[127,21,143,25],[127,22,143,26],[127,61,143,65],[127,63,143,67,"error"],[127,68,143,72],[127,69,143,73],[128,8,144,12],[128,14,144,18,"error"],[128,19,144,23],[129,6,145,8],[130,4,146,4],[130,5,146,5],[131,4,148,4,"isSaved"],[131,11,148,11],[131,13,148,14,"procesionId"],[131,24,148,33],[131,28,148,38],[132,6,149,8],[132,13,149,15,"get"],[132,16,149,18],[132,17,149,19],[132,18,149,20],[132,19,149,21,"savedProcesionIds"],[132,36,149,38],[132,37,149,39,"has"],[132,40,149,42],[132,41,149,43,"procesionId"],[132,52,149,54],[132,53,149,55],[133,4,150,4],[134,2,151,0],[134,3,151,1],[134,4,151,2],[134,5,151,3],[135,0,151,4],[135,3]],"functionMap":{"names":["<global>","create$argument_0","fetchProcesiones","fetchSavedProcesiones","map$argument_0","toggleSaveProcesion","set$argument_0","isSaved"],"mappings":"AAA;wDCuC;sBCM;KDiC;2BEE;iDCe,0BD;KFK;yBIE;oBCiB;iBDI;oBCY;iBDI;KJM;aME;KNE;EDC"},"hasCjsExports":false},"type":"js/module"}]}